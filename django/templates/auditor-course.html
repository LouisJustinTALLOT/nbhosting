{% extends "nbhosting.html" %}

{% block head_title %}
{{coursename}} - {{track.number_notebooks}} notebooks
{% endblock %}


{% block title %}
{{track}}:{{track.name}}
{% endblock %}


{% block breadcrumb %}
<ol class="breadcrumb">
{% if user.is_authenticated and user.is_staff %}
  <li class="breadcrumb-item staff"><a href="/staff/course/{{coursename}}">{{coursename}}</a></li>
  <li class="breadcrumb-item staff"><a href="/staff/courses/">courses</a></li>
{% endif %}
    <li class="breadcrumb-item"><a href='/welcome/'>home</a></li>
    <li class="breadcrumb-item"><a href='/auditor/courses'>courses</a></li>
    <li class="breadcrumb-item">
        <a href="/auditor/course/{{coursename}}">{{coursename}}</a></li>
    <li class="breadcrumb-item active">
        <a href="/auditor/course/{{coursename}}:{{track.name}}">{{track.name}}</a></li>
</ol>
{% endblock %}


{% block content %}
<style>
div.tracks {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: flex-flex-start;
    padding-left: 20px;
    padding-right: 10px;
    padding-top: 0px;
}
.track-head {
    width: 100%;
    margin-top: 10px;
    margin-bottom: 10px;
    font-size: 150%;
}
a.track, a.jupyter{
    padding: 4px;
    border-radius: 4px;
    border: solid 1px #888;
    margin: 5px;
}
a.track {
    background-color: #ddd;
    color:green;
}
a.jupyter {
    background-color: #ddd;
    color: orange;
}
a.track:link, a.jupyter:link {
    text-decoration: none;
}
a.track.active, a.jupyter.active {
    background-color: #fff;
    border-width: 3px;
}

.course-box {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: flex-start;
}
.notebook {
    font-size: 60%;
    border: 0.1px solid #888;
    border-radius: 5px;
    padding: 4px;
    margin-left: 3px;
    margin-right: 3px;
    margin-top: 2px
}
/* only in-track means it's not yet been copied */
.in-track {
    background-color: #ccc;
}
/* both means it exists and it's been copied */
.in-track.in-student {
    background-color: #afa;
}
/* only in-student means somehow it's obsolete */
.in-student {
    background-color: #faa;
}
a.notebook {
    color: black;
}
a.notebook:hover {
    color: purple;
}
span.section-details {
    font-size:  50%;
}
</style>

<!------------------------------>
<div class="container-fluid">
    <div class="row">
        <div class="col-2">
            <div class="tracks">
                <h1 class="btn btn-outline-primary track-head"
                    data-toggle="tooltip" data-html="true"
                    title="you may choose one of the following tracks"
                >by track</h1>
                {% for ntrack in tracks %}
                    <a href="/auditor/course/{{coursename}}:{{ntrack.name}}"
                        data-toggle="tooltip"
                        data-html="true"
                        title="{{ntrack.description}}
                        {% if ntrack.name == main_trackname %}<br/>(main track){% endif %}
                        {% if ntrack.name == track.name %}<br/>(current track){% endif %}
                        "
                        class="track
                        {% if ntrack.name == main_trackname %}main{% endif %}
                        {% if ntrack.name == track.name %}active{% endif %}
                        "
                    > {{ ntrack.name }}
                    </a>
                {% endfor %}
                <h1 class="btn btn-outline-danger track-head"
                    data-toggle="tooltip" data-html="true"
                    title="or, if you'd prefer through a regular jupyter browser
                    <br/>note that in this case you'll only able to see notebooks
                    <br/>that are <b>already present</b> in your workspace"
                >by file</h1>
                <a href="/auditor/jupyterdir/{{coursename}}/"
                    data-toggle="tooltip" data-html="true"
                    title="Jupyter classic will display the contents of your workdir
                    and spawn noteboks in separate tabs"
                    class="jupyter classic"
                    > jupyter classic
                </a>
                <a href="/auditor/jupyterdir/{{coursename}}/lab"
                    data-toggle="tooltip" data-html="true"
                    title="with Jupyter lab you can edit all your contents from
                    within a single browser tab"
                    class="jupyter lab"
                    > jupyter lab
                </a>
            </div>
        </div>
        <div class="card col-10">
            <div class="card-block m-2">
                <h1>track {{track.name}}</h1>
            </div>
            <ul class="list-group list-group-flush">
                {% for section in track.sections %}
                <li class="list-group-item">
                    <div class="card-block">
                        <h2 class="card-title">{{section.name}}
                            <span class="section-details">
                                ({{section.length}} notebooks)</span></h2>
                    </div>
                    <div class="course-box">
                        {% for notebook in section.notebooks %}
                        <a class='notebook {{notebook.classes}}'
                            href='/auditor/notebook/{{coursename}}:{{track.name}}/{{notebook.clean_path}}'
                        >{{notebook.notebookname}}</a>
                        {% endfor %}
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}

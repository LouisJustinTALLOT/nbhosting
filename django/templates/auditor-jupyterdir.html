{% extends "nbhosting.html" %}

{% block head_title %}
{{head_title}}
{% endblock %}

{% block title %}
Jupyter {%if lab %} lab {% else %} classic {% endif %} on {{ coursename }}
{% endblock %}

{% block breadcrumb %}
<ol class="breadcrumb">
{% if user.is_authenticated and user.is_staff %}
  <li class="breadcrumb-item staff"><a href="/staff/course/{{coursename}}">{{coursename}}</a></li>
  <li class="breadcrumb-item staff"><a href="/staff/courses/">courses</a></li>
{% endif %}
    <li class="breadcrumb-item"><a href='/welcome/'>home</a></li>
    <li class="breadcrumb-item"><a href='/auditor/courses'>courses</a></li>
    <li class="breadcrumb-item jupyterdir active">
        <a href="/auditor/jupyterdir/{{coursename}}">{{coursename}}</a></li>
    <li class="breadcrumb-item jupyterdir">
        <a href="/auditor/jupyterdir/{{coursename}}{%if not lab%}/lab{% endif %}">
            {%if not lab %}lab{% else %}classic{% endif %}</a></li>
</ol>
{% endblock %}

{% block content %}
<style>
div.tracks {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: flex-flex-start;
    padding-left: 20px;
    padding-right: 10px;
    padding-top: 0px;
}
.track-head, .update-head {
    width: 100%;
    margin-bottom: 10px;
    font-size: 150%;
}
.track-head {
    margin-top: 10px;
}
.update-head {
    margin-top: 100px;
}
a.track, a.git-pull {
    background-color: #f0f0f0;
    padding: 4px;
    border-radius: 4px;
    border: solid 1px #888;
    margin: 5px;
}
a.track {
    color: blue;
}
a.git-pull {
    color: red;
}
a.track:link {
    text-decoration: none;
}
html, body {
    height: 100%;
    width: 100%;
}

div.left-pane {
    position: absolute;
    top: 130px;
    bottom: 0px;
    left: 0px;
    right: 83%;
    padding: 0px;
}

div.iframe-container {
    position: absolute;
    top: 130px;
    bottom: 0px;
    left: 17%;
    right: 0px;
}

iframe {
    height: 100%;
}
.smaller{
    font-size: 60%;
}

iframe {
  background-image: url("/assets/img/loading.png");
  background-repeat: no-repeat;
  background-position: center;
 }

</style>

<!------------------------------>
<div class="container" height="100%">
    <div class="left-pane">
        <div class="tracks">
            <h1 class="btn btn-primary active track-head"
                data-toggle="tooltip" data-html="true"
                title="<span class='smaller'>leave jupyter mode and<br/>
                    go back to track mode</span>"
            >tracks</h1>
            {% for ntrack in tracks %}
                <a href="/auditor/course/{{coursename}}:{{ntrack.name}}"
                    data-toggle="tooltip"
                    data-html="true"
                    title="{{ntrack.description}}"
                    class="track"
                > {{ ntrack.name }}
                </a>
            {% endfor %}
        </div>
        <div class="tracks">
        <h1 class="btn btn-danger active update-head"
            data-toggle="tooltip" data-html="true"
            title="use this feature if you want to adopt changes
            the teacher has made upstream"
        >go git</h1>
        <a href="{{gitpull_url}}"
            target="nbhosting-jupyter"
            data-toggle="tooltip" data-html="true"
            title="<span class='smaller'>this will turn your workspace into a git repo if needed,
            and update it from the teacher's last version</span>"
            class="git-pull"
            > git pull
        </a>
    </div>
    </div>
    <div class="iframe-container">
        <iframe
            height="100%"
            width="100%"
            src="{{iframe}}"
            onload="this.contentWindow.focus()"
            name="nbhosting-jupyter"
            >
        </iframe>
    </div>
</div>

{% endblock %}
